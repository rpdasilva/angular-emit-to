"use strict";angular.module("rpd.emitTo",[]).config(["$provide",function(e){e.decorator("$rootScope",["$delegate","$exceptionHandler",function(e,t){var n=e.constructor,i={},r={},o=[].slice,$=function(e,t,n){return e.concat(o.call(t,n))};for(var l in e)"function"==typeof e[l]&&(i[l]=e[l]);return r.$new=function(e){var t=i.$new.call(this,e);return t.$emitSpan=this.$emitSpan,t.$emitSpanVia=this.$emitSpanVia,t.$$emitToRegister=this.$$emitToRegister,t},r.$$emitToRegister=function(e){var t=this.$root.$$emitToRegistered;t[e]={$id:this.$id,scope:this}},r.$$emitToDeregister=function(e){e&&delete this.$root.$$emitToRegistered[e]},r.$emitTo=function(e,n){function i(){var e,t=this,n=t.$$prevSibling,i={x:[],y:0};do{e=0;do n&&(n=n.$$prevSibling,e++);while(n);i.x.push(e),t=t.$parent,t&&(n=t.$$prevSibling,i.y++)}while(t);return i.x.pop(),i.x.reverse(),i}function r(e){var i,r=d.$root.$$emitToRegistered[e]||null,$=d.$root;if(r){for(i=0;i<r.y;i++){$=$.$$childHead;for(var l=0;l<r.x[i];l++)$=$.$$nextSibling}for(o=$.$$listeners[n]||u,f.currentScope=$,i=0,c=o.length;c>i;i++)if(o[i])try{o[i].apply(null,g)}catch(a){t(a)}else o.splice(i,1),i--,c--}return s?(f.currentScope=null,f):void 0}var o,l,c,a,u=[],d=this,p=this.$root.$$emitToRegistered,s=!1,f={name:n,targetScope:d,stopPropagation:function(){s=!0},preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=$([f],arguments,1);for(g.splice(1,1),a=e?Object.prototype.toString.call(e):null,e="[object Array]"==a?e:[e],l=0;l<e.length;l++)e[l]&&(p[e[l]]&&angular.extend(p[e[l]],i.call(p[e[l]].scope)),r(e[l]));return f.currentScope=null,f},r.$emitSpan=function(e){function n(n,$){var c=n;do{if(n!==c||p){for(p=!1,i=n.$$listeners[e]||l,u.currentScope=n,r=0,o=i.length;o>r;r++)if(i[r])try{i[r].apply(null,d)}catch(s){t(s)}else i.splice(r,1),r--,o--;if(a)return u.currentScope=null,u}n=n["$$"+$+"Sibling"]}while(n)}var i,r,o,l=[],c=this,a=!1,u={name:e,targetScope:c,stopPropagation:function(){a=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},d=$([u],arguments,1),p=!0;return n(c,"prev"),n(c,"next"),u.currentScope=null,u},r.$emitSpanVia=function(e,t,n){function i(){function e(i,o){for(o=o||0;s-1>o;o++)o>0&&i&&i.$$nextSibling&&e(i.$$nextSibling,o),i=i&&i.$$childHead?i.$$childHead:null;i&&o==s-1&&r.$emitSpan.call(i,t,n)}function i(t,n){do t=t["$$"+n+"Sibling"]||null,e(t);while(t)}var o,$=l.$$childHead;for(o=1;f>o;o++)$=$.$$nextSibling;s>1?(e($),i($,"prev"),i($,"next")):r.$emitSpan.call(l.$$childHead,t,n)}var o,l=this,c=this.$root.$$emitToRegistered[e]?this.$root.$$emitToRegistered[e].$id:null,a=!1,u=!1,d={name:t,targetScope:l,stopPropagation:function(){u=!0},preventDefault:function(){d.defaultPrevented=!0},defaultPrevented:!1},p=$([d],arguments,1),s=0,f=0;p.splice(1,1);do{if(l=l.$parent,l&&(s++,l.$id==c)){a=!0;do o=o?o.$$prevSibling:null,f++;while(o);break}o=l}while(l);return a&&i(),d.currentScope=null,d},angular.extend(n.prototype,r),angular.extend(e,r),e.$$emitToRegistered={},e}])}]).directive("emitToId",[function(){return{restrict:"A",link:function(e,t,n){e.$$emitToId=function(){return n.emitToId},e.$watch("$$emitToId()",function(t,i){e.$$emitToDeregister(i),e.$$emitToRegister(n.emitToId)}),e.$on("$destroy",function(){e.$$emitToDeregister(e.$$emitToId())})}}}]);